<%= stylesheet_link_tag "designer_tools"%>
<%= javascript_include_tag "designer_tools"%>

<% content_for :title do %>
  Проектировщик
<% end %>

<!-- fixme -->
<% content_for :breadcrumb do %>
  <li><%= link_to "Список проектов", projects_path %><span class="divider">></span></li>
  <li><%= link_to @project.name, project_pages_path(@project.id) %><span class="divider">></span></li>
  <li class="active"><%= link_to @page.name, project_page_designer_tools_path(@project.id, @page.id) %></li>
<% end %>

  <div class="container-fluid">
    <div class="row">
      <div class="aside">
        <div class="well sidebar-nav">
          <ul class="nav nav-list">
            <li class="nav-header"><%= @page.name %></li>
            <li class="nav-info">Все изменения сохранены</li>
            <div id="groups">
              <% @groups.each do |group| %>
                <div>
                  <a class="groups-header"> <%= group.label %> </a>
                  <div class="groups-content" id="group<%= group.id %>">
                    <% @elements.each do |element| %>
                      <p id="el<%= element.id %>">
                        <code>&lt;<%= element.tag %>&gt;</code>
                        <label><%= element.label %></label>
                      </p>
                    <% end %>
                  </div>
                </div>
              <% end  %>
            </div>
          </ul>
        </div>
      </div>
      <div class="workspace">
      </div>
    </div>
  </div>

  <script type="text/template" id="block-template">
    <div class="block">
      <div class="btn-controls">
        <span class="btn-delete"></span>
        <span class="btn-edit"></span>
        <span class="btn-copy"></span>
        <span class="btn-select"></span>
      </div>
      <div class="content">
        {{ html }}
      </div>
    </div>
  </script>

  <script>
    var allElements = new Backbone.Collection;
    allElements.reset($.parseJSON("<%= @elements.to_json %>".replace(/&quot;/g, '"').replace(/&lt;/g, "<").replace(/&gt;/g, ">")));
  </script>
